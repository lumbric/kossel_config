[general]
version = 2
name = Kossel Mini_settings
definition = kossel_mini

[metadata]
type = definition_changes

[values]
machine_end_gcode = M104 S0 ;extruder heater off
	M140 S0 ;heated bed heater off (if you have it)
	M42 P5 S255  ; Hotbed fan on
	G91 ;relative positioning
	G1 E-1 F300  ;retract the filament a bit before lifting the nozzle, to release some of the pressure
	G28 ;Home all axes (max endstops)
	M84 ;steppers off
	G90 ;absolute positioning
	M117 Done!
machine_start_gcode = G21        ;metric values
	G90        ;absolute positioning
	M82        ;set extruder to absolute mode
	M107       ;start with the fan off
	G28        ;move X/Y to min endstops
	;G1 Z15.0 F9000 ;move the platform down 15mm
	G92 E0                  ;zero the extruded length
	G1 F200 E3              ;extrude 3mm of feed stock
	G92 E0                  ;zero the extruded length again
	G1 F9000
	; --- custom homing part PR 2015-05-09 ---
	; set target temperatur (non blocking)
	M42 P5 S0
	M140 S60
	M104 S210
	;Put printing message on LCD screen
	M117 Homing...
	;G28 ; home all axes
	; Z0.1 was determined by experiments!
	; see also:
	;    http://drucker.abteil.org/index.php/Kalibrieren#Z-H.C3.B6he_und_Autoleveling
	G29 ; autolevel
	; move to center 80mm above ground level
	; moving direction to Z0 or from Z0 seems to scratch
	; the glass bed sometimes
	; Not needed, because G0 command below
	;G0 Z50
	; dropfende Nozzle besser draussen ueber Abstreifer
	G0 X40.60 Y84.71 Z25.00
	; set target temperaturs and wait
	M109 S210
	M190 S60
	; ------- START clean nozzle
	G0 X25 Y65
	G0 X50 Y90 Z20
	G0 X50 Y90 Z12
	; second round of cleaning
	G0 X25 Y65
	G0 X50 Y90 Z20
	G0 X50 Y90 Z12
	G0 X0 Y0 Z12.5
	G0 X0.0 Y0.0
	; ------- END clean nozzle
	;Put printing message on LCD screen
	M117 Printing...
	end.gcode = ;End GCode
	M104 S0                     ;extruder heater off
	M140 S0                     ;heated bed heater off (if you have it)
	M42 P5 S255  ; Hotbed fan on
	G91                                    ;relative positioning
	G1 E-1 F300                            ;retract the filament a bit before lifting the nozzle, to release some of the pressure
	G1 Z+0.5 E-5 X-20 Y-20 F9000 ;move Z up a bit and retract filament even more
	G28 X0 Y0                              ;move X/Y to min endstops, so the head is out of the way
	M84                         ;steppers off
	G90                         ;absolute positioning
	M117 Done!

